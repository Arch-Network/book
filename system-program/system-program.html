<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>System Program - The Arch Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Documentation for the Arch Network - A Bitcoin-native computation environment">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/custom.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item affix "><li class="part-title">Getting Started</li><li class="chapter-item "><a href="../getting-started/quick-start.html">üöÄ Quick Start Guide</a></li><li class="chapter-item "><a href="../getting-started/bitcoin-and-titan-setup.html">üèóÔ∏è Validator Setup</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../getting-started/requirements.html">System Requirements</a></li><li class="chapter-item "><a href="../guides/how-to-configure-local-validator-bitcoin-testnet4.html">Setup Options</a></li><li class="chapter-item "><a href="../getting-started/validator-staking.html">Running Your Node</a></li></ol></li><li class="chapter-item "><li class="part-title">Program Development</li><li class="chapter-item "><a href="../guides/understanding-arch-programs.html">Understanding Arch Programs</a></li><li class="chapter-item "><a href="../getting-started/setting-up-a-project.html">Setting Up a Project</a></li><li class="chapter-item "><a href="../guides/writing-your-first-program.html">Writing Your First Program</a></li><li class="chapter-item "><a href="../guides/testing-guide.html">Testing Your Program</a></li><li class="chapter-item "><a href="../guides/guides.html">Program Examples</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../guides/how-to-create-a-fungible-token.html">Fungible Token</a></li><li class="chapter-item "><a href="../guides/how-to-write-oracle-program.html">Oracle Program</a></li><li class="chapter-item "><a href="../guides/how-to-build-runes-swap.html">Runes Swap</a></li><li class="chapter-item "><a href="../guides/how-to-build-lending-protocol.html">Lending Protocol</a></li></ol></li><li class="chapter-item "><li class="part-title">Arch Program Library (APL)</li><li class="chapter-item "><a href="../apl/introduction.html">Introduction</a></li><li class="chapter-item "><a href="../apl/token-program.html">Token Program</a></li><li class="chapter-item "><a href="../apl/associated-token-account.html">Associated Token Account Program</a></li><li class="chapter-item affix "><li class="part-title">Core Concepts</li><li class="chapter-item "><a href="../concepts/architecture.html">Architecture Overview</a></li><li class="chapter-item "><a href="../concepts/network-architecture.html">Network Architecture</a></li><li class="chapter-item "><a href="../concepts/bitcoin-integration.html">Bitcoin Integration</a></li><li class="chapter-item "><a href="../concepts/consensus.html">ROAST and FROST Consensus</a></li><li class="chapter-item "><a href="../concepts/validator-state-machine.html">Validator State Machine</a></li><li class="chapter-item "><a href="../program/program.html">Programs</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../program/utxo.html">UTXOs</a></li><li class="chapter-item "><a href="../program/accounts.html">Accounts</a></li><li class="chapter-item "><a href="../program/instructions-and-messages.html">Instructions</a></li><li class="chapter-item "><a href="../program/syscall.html">System Calls</a></li></ol></li><li class="chapter-item "><a href="../concepts/nodes.html">Node Operation</a></li><li class="chapter-item affix "><li class="part-title">SDK Reference</li><li class="chapter-item "><a href="../sdk/sdk.html">SDK Overview</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../sdk/typescript/getting-started.html">TypeScript SDK (Saturn)</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../sdk/typescript/api-reference.html">TypeScript API Reference</a></li><li class="chapter-item "><a href="../sdk/typescript/examples.html">TypeScript Examples</a></li><li class="chapter-item "><a href="../sdk/typescript/web3-integration.html">Web3 Integration</a></li></ol></li><li class="chapter-item "><a href="../sdk/rust/getting-started.html">Rust SDK</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../sdk/rust/api-reference.html">Rust API Reference</a></li><li class="chapter-item "><a href="../sdk/rust/examples.html">Rust Examples</a></li><li class="chapter-item "><a href="../sdk/rust/program-development.html">Program Development</a></li></ol></li><li class="chapter-item "><a href="../sdk/sdk.html">Core Types</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../sdk/pubkey.html">Pubkey</a></li><li class="chapter-item "><a href="../sdk/account.html">Account</a></li><li class="chapter-item "><a href="../sdk/instructions-and-messages.html">Instructions and Messages</a></li><li class="chapter-item "><a href="../sdk/runtime-transaction.html">Runtime Transaction</a></li><li class="chapter-item "><a href="../sdk/processed-transaction.html">Processed Transaction</a></li><li class="chapter-item "><a href="../sdk/signature.html">Signature</a></li></ol></li></ol></li><li class="chapter-item "><li class="part-title">Tools & CLI</li><li class="chapter-item "><a href="../guides/arch-cli-reference.html">Arch CLI Reference</a></li><li class="chapter-item affix "><li class="part-title">Reference</li><li class="chapter-item "><a href="../rpc/rpc.html">API Reference</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../rpc/rpc-method-availability.html">RPC Method Availability</a></li></ol></li><li class="chapter-item expanded "><a href="../system-program/system-program.html" class="active">System Program</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../system-program/create-account.html">Account Creation</a></li><li class="chapter-item "><a href="../system-program/make-executable.html">Program Deployment</a></li></ol></li><li class="chapter-item "><li class="part-title">Resources</li><li class="chapter-item "><a href="../reference/troubleshooting.html">Troubleshooting</a></li><li class="chapter-item "><a href="../getting-started/faq.html">FAQ</a></li><li class="chapter-item "><a href="../getting-started/resources.html">External Resources</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Arch Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/arch-network/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/arch-network/book/edit/main/src/system-program/system-program.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="system-program"><a class="header" href="#system-program">System Program</a></h1>
<p>The Arch System Program is the core program that manages fundamental account operations on the Arch Network. This program provides essential functionality for account creation, ownership management, UTXO anchoring, and lamport transfers.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The System Program handles:</p>
<ul>
<li><strong>Account Creation</strong>: Creating new accounts with specified ownership and data allocation</li>
<li><strong>UTXO Integration</strong>: Anchoring accounts to Bitcoin UTXOs for native Bitcoin integration</li>
<li><strong>Ownership Management</strong>: Transferring account ownership between programs</li>
<li><strong>Lamport Transfers</strong>: Moving lamports (the base unit of value) between accounts</li>
<li><strong>Space Allocation</strong>: Allocating data storage space for accounts</li>
</ul>
<h2 id="built-in-programs"><a class="header" href="#built-in-programs">Built-in Programs</a></h2>
<p>Arch Network includes several built-in programs that provide essential functionality:</p>
<h3 id="system-program-1"><a class="header" href="#system-program-1">System Program</a></h3>
<p>The core system program for account management and basic operations.</p>
<h3 id="apl-token-program"><a class="header" href="#apl-token-program">APL Token Program</a></h3>
<p>Comprehensive token management with SPL token compatibility.</p>
<h3 id="associated-token-account-ata-program"><a class="header" href="#associated-token-account-ata-program">Associated Token Account (ATA) Program</a></h3>
<p>Automatic token account creation and management.</p>
<h3 id="compute-budget-program"><a class="header" href="#compute-budget-program">Compute Budget Program</a></h3>
<p>Transaction compute unit management and fee optimization.</p>
<h3 id="stake-program"><a class="header" href="#stake-program">Stake Program</a></h3>
<p>Validator staking and delegation management.</p>
<h3 id="vote-program"><a class="header" href="#vote-program">Vote Program</a></h3>
<p>Governance and voting mechanisms.</p>
<h3 id="loader-program"><a class="header" href="#loader-program">Loader Program</a></h3>
<p>Program deployment and upgrade management.</p>
<h2 id="available-instructions"><a class="header" href="#available-instructions">Available Instructions</a></h2>
<h3 id="createaccount"><a class="header" href="#createaccount">CreateAccount</a></h3>
<p>Creates a new account with the specified parameters.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>lamports: u64</code> - Number of lamports to transfer to the new account</li>
<li><code>space: u64</code> - Number of bytes of memory to allocate</li>
<li><code>owner: Pubkey</code> - Address of the program that will own the new account</li>
</ul>
<p><strong>Account References:</strong></p>
<ol>
<li><code>[WRITE, SIGNER]</code> Funding account (payer)</li>
<li><code>[WRITE, SIGNER]</code> New account to create</li>
</ol>
<p><strong>Example:</strong></p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arch_program::{
    system_instruction,
    pubkey::Pubkey,
};

let instruction = system_instruction::create_account(
    &amp;from_pubkey,
    &amp;to_pubkey,
    1_000_000,  // lamports
    165,        // space in bytes
    &amp;owner_pubkey,
);
<span class="boring">}</span></code></pre></pre>
<h3 id="createaccountwithanchor"><a class="header" href="#createaccountwithanchor">CreateAccountWithAnchor</a></h3>
<p>Creates a new account and anchors it to a specific Bitcoin UTXO.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>lamports: u64</code> - Number of lamports to transfer</li>
<li><code>space: u64</code> - Number of bytes to allocate</li>
<li><code>owner: Pubkey</code> - Program that will own the account</li>
<li><code>txid: [u8; 32]</code> - Bitcoin transaction ID</li>
<li><code>vout: u32</code> - Output index in the Bitcoin transaction</li>
</ul>
<p><strong>Account References:</strong></p>
<ol>
<li><code>[WRITE, SIGNER]</code> Funding account</li>
<li><code>[WRITE, SIGNER]</code> New account to create</li>
</ol>
<p><strong>Example:</strong></p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let instruction = system_instruction::create_account_with_anchor(
    &amp;from_pubkey,
    &amp;to_pubkey,
    1_000_000,  // lamports
    165,        // space
    &amp;owner_pubkey,
    txid,       // Bitcoin transaction ID
    vout,       // Bitcoin output index
);
<span class="boring">}</span></code></pre></pre>
<h3 id="assign"><a class="header" href="#assign">Assign</a></h3>
<p>Changes the owner of an existing account.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>owner: Pubkey</code> - New owner program</li>
</ul>
<p><strong>Account References:</strong></p>
<ol>
<li><code>[WRITE, SIGNER]</code> Account to reassign</li>
</ol>
<p><strong>Example:</strong></p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let instruction = system_instruction::assign(
    &amp;account_pubkey,
    &amp;new_owner_pubkey,
);
<span class="boring">}</span></code></pre></pre>
<h3 id="anchor"><a class="header" href="#anchor">Anchor</a></h3>
<p>Anchors an existing account to a Bitcoin UTXO.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>txid: [u8; 32]</code> - Bitcoin transaction ID</li>
<li><code>vout: u32</code> - Output index</li>
</ul>
<p><strong>Account References:</strong></p>
<ol>
<li><code>[WRITE, SIGNER]</code> Account to anchor</li>
</ol>
<p><strong>Example:</strong></p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let instruction = system_instruction::anchor(
    &amp;account_pubkey,
    txid,       // Bitcoin transaction ID
    vout,       // Bitcoin output index
);
<span class="boring">}</span></code></pre></pre>
<h3 id="transfer"><a class="header" href="#transfer">Transfer</a></h3>
<p>Transfers lamports between accounts.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>lamports: u64</code> - Number of lamports to transfer</li>
</ul>
<p><strong>Account References:</strong></p>
<ol>
<li><code>[WRITE, SIGNER]</code> Source account</li>
<li><code>[WRITE]</code> Destination account</li>
</ol>
<p><strong>Example:</strong></p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let instruction = system_instruction::transfer(
    &amp;from_pubkey,
    &amp;to_pubkey,
    1_000_000,  // lamports
);
<span class="boring">}</span></code></pre></pre>
<h2 id="program-interaction"><a class="header" href="#program-interaction">Program Interaction</a></h2>
<h3 id="using-built-in-programs"><a class="header" href="#using-built-in-programs">Using Built-in Programs</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arch_program::{
    system_instruction,
    system_program,
    pubkey::Pubkey,
};

// Create a new account
let create_account_ix = system_instruction::create_account(
    &amp;payer_pubkey,
    &amp;new_account_pubkey,
    rent_exemption_amount,
    space,
    &amp;owner_program_pubkey,
);

// Transfer lamports
let transfer_ix = system_instruction::transfer(
    &amp;source_pubkey,
    &amp;destination_pubkey,
    amount,
);

// Assign new owner
let assign_ix = system_instruction::assign(
    &amp;account_pubkey,
    &amp;new_owner_pubkey,
);
<span class="boring">}</span></code></pre></pre>
<h3 id="program-addresses"><a class="header" href="#program-addresses">Program Addresses</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Program</th><th>Address</th><th>Description</th></tr></thead><tbody>
<tr><td>System</td><td><code>11111111111111111111111111111111</code></td><td>Core system operations</td></tr>
<tr><td>APL Token</td><td><code>AplToken111111111111111111111111</code></td><td>Token management</td></tr>
<tr><td>ATA</td><td><code>AssociatedTokenAccount1111111111</code></td><td>Associated token accounts</td></tr>
<tr><td>Compute Budget</td><td><code>ComputeBudget111111111111111111111111111111</code></td><td>Compute unit management</td></tr>
<tr><td>Stake</td><td><code>Stake1111111111111111111111111111111111111111</code></td><td>Staking operations</td></tr>
<tr><td>Vote</td><td><code>Vote111111111111111111111111111111111111111111</code></td><td>Voting operations</td></tr>
<tr><td>Loader</td><td><code>BPFLoader1111111111111111111111111111111111</code></td><td>Program deployment</td></tr>
</tbody></table>
</div>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="account-management"><a class="header" href="#account-management">Account Management</a></h3>
<ol>
<li><strong>Proper Sizing</strong>: Allocate appropriate space for account data</li>
<li><strong>Rent Exemption</strong>: Ensure accounts have sufficient lamports for rent exemption</li>
<li><strong>Ownership</strong>: Carefully manage account ownership transfers</li>
<li><strong>UTXO Anchoring</strong>: Use UTXO anchoring for Bitcoin integration</li>
</ol>
<h3 id="security-considerations"><a class="header" href="#security-considerations">Security Considerations</a></h3>
<ol>
<li><strong>Authority Validation</strong>: Always verify account authorities</li>
<li><strong>Input Validation</strong>: Validate all input parameters</li>
<li><strong>Error Handling</strong>: Implement proper error handling for failed operations</li>
<li><strong>Access Control</strong>: Restrict access to sensitive operations</li>
</ol>
<h3 id="performance-optimization"><a class="header" href="#performance-optimization">Performance Optimization</a></h3>
<ol>
<li><strong>Batch Operations</strong>: Group related operations when possible</li>
<li><strong>Space Efficiency</strong>: Minimize account space allocation</li>
<li><strong>Compute Budget</strong>: Use compute budget program for optimization</li>
<li><strong>Caching</strong>: Cache frequently accessed account data</li>
</ol>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<h3 id="common-errors"><a class="header" href="#common-errors">Common Errors</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Error</th><th>Description</th><th>Resolution</th></tr></thead><tbody>
<tr><td><code>InsufficientFunds</code></td><td>Account has insufficient lamports</td><td>Fund the account or reduce amount</td></tr>
<tr><td><code>InvalidAccountData</code></td><td>Account data is invalid</td><td>Reinitialize the account</td></tr>
<tr><td><code>InvalidOwner</code></td><td>Invalid account owner</td><td>Check ownership requirements</td></tr>
<tr><td><code>AccountInUse</code></td><td>Account is already in use</td><td>Use a different account or wait</td></tr>
</tbody></table>
</div>
<h3 id="error-recovery"><a class="header" href="#error-recovery">Error Recovery</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use arch_program::system_instruction;

match system_instruction::create_account(/* params */) {
    Ok(instruction) =&gt; {
        // Process instruction
    }
    Err(SystemError::InsufficientFunds) =&gt; {
        // Handle insufficient funds
    }
    Err(SystemError::InvalidAccountData) =&gt; {
        // Handle invalid account data
    }
    Err(e) =&gt; {
        // Handle other errors
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="integration-examples"><a class="header" href="#integration-examples">Integration Examples</a></h2>
<h3 id="creating-a-token-mint"><a class="header" href="#creating-a-token-mint">Creating a Token Mint</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Create mint account
let create_mint_ix = system_instruction::create_account(
    &amp;payer_pubkey,
    &amp;mint_pubkey,
    rent_exemption_amount,
    Mint::LEN as u64,
    &amp;apl_token::id(),
);

// Initialize mint (using APL token program)
let init_mint_ix = apl_token::instruction::initialize_mint(
    &amp;apl_token::id(),
    &amp;mint_pubkey,
    &amp;mint_authority_pubkey,
    None,
    decimals,
)?;
<span class="boring">}</span></code></pre></pre>
<h3 id="setting-up-associated-token-account"><a class="header" href="#setting-up-associated-token-account">Setting Up Associated Token Account</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Create ATA account
let create_ata_ix = associated_token_account::instruction::create(
    &amp;payer_pubkey,
    &amp;owner_pubkey,
    &amp;mint_pubkey,
    &amp;token_program_id,
);

// Fund ATA account
let fund_ata_ix = system_instruction::transfer(
    &amp;payer_pubkey,
    &amp;ata_pubkey,
    rent_exemption_amount,
);
<span class="boring">}</span></code></pre></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><strong>Token Operations</strong>: Learn about <a href="../guides/how-to-create-a-fungible-token.html">APL Token Management</a></li>
<li><strong>Program Development</strong>: Explore <a href="../guides/writing-your-first-program.html">Writing Your First Program</a></li>
<li><strong>Advanced Features</strong>: Discover <a href="../concepts/architecture.html#core-programs">Core Programs</a></li>
<li><strong>Integration</strong>: Understand <a href="../concepts/bitcoin-integration.html">Bitcoin Integration</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../rpc/rpc-method-availability.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../system-program/create-account.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../rpc/rpc-method-availability.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../system-program/create-account.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/mermaid.min.js"></script>
        <script src="../theme/mermaid-init.js"></script>
        <script src="../theme/custom.js"></script>


    </div>
    </body>
</html>
